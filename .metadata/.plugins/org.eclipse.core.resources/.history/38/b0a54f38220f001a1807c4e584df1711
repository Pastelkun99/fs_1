<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
					"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="analysisMapper">

	<select id="getAnalysisInfo" parameterType="int" resultType="com.fusion1.dao.InfoVO">
		SELECT * FROM INFOTBL WHERE a_no = #{no}
	</select>
	
	<select id="getAnalysisQuestionList" resultType="com.fusion1.dao.AnalysisDAO">
		<![CDATA[
		SELECT * FROM QUESTIONTBL
		]]>
	</select>
	
	<select id="getAnalysisSelectList" resultType="com.fusion1.dao.AnalysisDAO">
		SELECT * FROM QUESTIONTBL LEFT JOIN SELECTTBL ON QUESTIONTBL.q_selection = SELECTTBL.q_selection ORDER BY QUESTIONTBL.q_no, SELECTTBL.q_order;
	</select>
	
	<select id="getAnalysisAnswerList" parameterType="string" resultType="com.fusion1.dao.AnswerVO">
		SELECT * FROM ANSWERTBL WHERE q_id = #{userid}
	</select>
	
	<select id="getAnalysisAnswer" parameterType="com.fusion1.dao.AnswerVO" resultType="com.fusion1.dao.AnswerVO">
		SELECT * FROM ANSWERTBL WHERE q_no = #{q_no}
	</select>
	
	<select id="getAnalysisAnswerMulti" parameterType="String" resultType="com.fusion1.dao.AnswerVO">
		SELECT * FROM ANSWERTBL WHERE q_id = #{q_id} ORDER BY a_number DESC limit 2
	</select>
	
	<insert id="inputAnalysisAnswer" parameterType="com.fusion1.dao.AnswerVO" >
		INSERT INTO ANSWERTBL VALUES (0, #{q_no}, #{q_id}, #{q_selection}, #{q_value})
	</insert>
	
	<update id="inputAnalysisUpdate" parameterType="com.fusion1.dao.AnswerVO">
		UPDATE ANSWERTBL SET q_value = #{q_value} WHERE q_no = #{q_no}
	</update>

</mapper>