<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
					"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="multiBoardMapper">
	
	<select id="getArticleListByBoardNo" parameterType="MultiBoardVO" resultType="ArticleVO">
		SELECT B.*
		FROM multiboardtbl A, articletbl B
		WHERE A.board_no = B.board_no AND A.board_no = #{board_no}
		ORDER BY article_parentsno DESC, article_grouporder ASC
	</select>

	<select id="getArticleCountByBoardNo" parameterType="MultiBoardVO" resultType="ArticleVO">
		SELECT COUNT(*) as cnt 
		from multiboardtbl A, articletbl B 
		WHERE A.board_no = B.board_no AND A.board_no = #{board_no}
	</select>
	
	<select id="getBoardSearchCount" parameterType="PagenationVO" resultType="ArticleVO">
		SELECT COUNT(*) AS cnt FROM multiboardtbl A, articletbl B
		<if test="searchCon == 1">
			WHERE 
				article_title LIKE CONCAT('%', #{keyword}, '%') AND article_deleteyn = 'N' 
			ORDER BY article_date DESC
		</if>
		<if test="searchCon == 2">
			WHERE 
				article_content LIKE CONCAT('%', #{keyword}, '%') AND article_deleteyn = 'N' 
			ORDER BY article_date DESC
		</if>
		<if test="searchCon == 3">
			WHERE 
				article_writer LIKE CONCAT('%', #{keyword}, '%') AND article_deleteyn = 'N'
			ORDER BY article_date DESC
		</if>
		<if test="searchCon == 4">
			WHERE article_title LIKE CONCAT('%', #{keyword}, '%') 
			OR article_content LIKE CONCAT('%', #{keyword}, '%')
			OR article_writer LIKE CONCAT('%', #{keyword}, '%') 
			AND article_deleteyn = 'N' 
		</if>
	</select>
	
</mapper>